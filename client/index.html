<!doctype html>
<html lang="en" data-framework="javascript">
    <head>
        <meta charset="utf-8">
        <title>VanillaJS • TodoMVC</title>
        <link rel="stylesheet" href="res/base.css">
        <link rel="stylesheet" href="res/index.css">
    </head>
    <body>
        <section class="todoapp">
            <header class="header">
                <h1>nor(<span>bug</span>):con</h1>
                <input class="new-todo no-splash" placeholder="What needs to be done?" autofocus>
            </header>
            <section class="splash">
                <button class="begin">Bugin</button>
            </section>
            <section class="main no-splash">
                <input class="toggle-all" type="checkbox">
                <label for="toggle-all">Mark all as complete</label>
                <ul class="todo-list"></ul>
            </section>
            <footer class="footer no-splash">
                <span class="todo-count"></span>
                <ul class="filters">
                    <li>
                        <a href="#/" class="selected">All</a>
                    </li>
                    <li>
                        <a href="#/active">Active</a>
                    </li>
                    <li>
                        <a href="#/completed">Completed</a>
                    </li>
                </ul>
                <button class="clear-completed">Clear completed</button>
            </footer>
        </section>
        <section class="konami">
        </section>
        <footer class="info">
            <p>Created by <a href="http://twitter.com/oscargodson">Oscar Godson</a></p>
            <p>Refactored by <a href="https://github.com/cburgmer">Christoph Burgmer</a></p>
            <p>Part of <a href="http://todomvc.com">TodoMVC</a></p>
            <hr />
            <p>Buggered up by <a href="https://neontribe.co.uk">Neontribe</a></p>
        </footer>
        <script src="res/base.js"></script>
        <script src="js/helpers.js"></script>
        <script src="js/store.js"></script>
        <script src="js/model.js"></script>
        <script src="js/template.js"></script>
        <script src="js/view.js"></script>
        <script src="js/controller.js"></script>
        <script src="js/app.js"></script>
        <script>
            function Konami(element, success) {
                this.code = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
                // or squares :P
                this.characters = {
                    "38": "↑",
                    "40": "↓",
                    "37": "←",
                    "39": "→",
                    "66": "B", //b
                    "65": "A", //a
                };
                this.element = element;
                this.success = success;
                this.init();
                this.bug = 1;
            };
            Konami.prototype.init = function() {
                this.index = 0;
                this.keys = [];
            };
            Konami.prototype.push = function(key) {
                this.keys.push(key);
                this._render();
                this._validate();
            };
            Konami.prototype._render = function() {
                var content = this.keys.map(c => this.characters[c]).join(' ');
                this.element.innerText = content;
            };
            Konami.prototype._validate = function() {
                if(this.code[this.index] !== this.keys[this.index]) {
                    return this.init();
                }
                this.index++;
                if(this.code.length+this.bug === this.keys.length) {
                    this.success();
                }
            };
            window.konami = new Konami(qs('.konami'), function konamiComplete() {
                qs('html').style.cursor = "url('res/bug.png'), default";
            });
        </script>
    </body>
</html>
